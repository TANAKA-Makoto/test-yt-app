(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))m(g);new MutationObserver(g=>{for(const h of g)if(h.type==="childList")for(const w of h.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&m(w)}).observe(document,{childList:!0,subtree:!0});function y(g){const h={};return g.integrity&&(h.integrity=g.integrity),g.referrerPolicy&&(h.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?h.credentials="include":g.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function m(g){if(g.ep)return;g.ep=!0;const h=y(g);fetch(g.href,h)}})();function Qe(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function ze(f){if(Object.prototype.hasOwnProperty.call(f,"__esModule"))return f;var E=f.default;if(typeof E=="function"){var y=function m(){var g=!1;try{g=this instanceof m}catch{}return g?Reflect.construct(E,arguments,this.constructor):E.apply(this,arguments)};y.prototype=E.prototype}else y={};return Object.defineProperty(y,"__esModule",{value:!0}),Object.keys(f).forEach(function(m){var g=Object.getOwnPropertyDescriptor(f,m);Object.defineProperty(y,m,g.get?g:{enumerable:!0,get:function(){return f[m]}})}),y}const Ke={},Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"})),Q=ze(Ze);var me={},he={},Ie;function ke(){return Ie||(Ie=1,function(f){(function(E){E.parser=function(e,t){return new m(e,t)},E.SAXParser=m,E.SAXStream=c,E.createStream=o,E.MAX_BUFFER_LENGTH=64*1024;var y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function m(e,t){if(!(this instanceof m))return new m(e,t);var n=this;h(n),n.q=n.c="",n.bufferCheckPosition=E.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!!(e||n.opt.noscript),n.state=i.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(E.XML_ENTITIES):Object.create(E.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(l)),n.opt.unquotedAttributeValues===void 0&&(n.opt.unquotedAttributeValues=!e),n.trackPosition=n.opt.position!==!1,n.trackPosition&&(n.position=n.line=n.column=0),U(n,"onready")}Object.create||(Object.create=function(e){function t(){}t.prototype=e;var n=new t;return n}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});function g(e){for(var t=Math.max(E.MAX_BUFFER_LENGTH,10),n=0,r=0,A=y.length;r<A;r++){var O=e[y[r]].length;if(O>t)switch(y[r]){case"textNode":j(e);break;case"cdata":C(e,"oncdata",e.cdata),e.cdata="";break;case"script":C(e,"onscript",e.script),e.script="";break;default:z(e,"Max buffer length exceeded: "+y[r])}n=Math.max(n,O)}var N=E.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=N+e.position}function h(e){for(var t=0,n=y.length;t<n;t++)e[y[t]]=""}function w(e){j(e),e.cdata!==""&&(C(e,"oncdata",e.cdata),e.cdata=""),e.script!==""&&(C(e,"onscript",e.script),e.script="")}m.prototype={end:function(){G(this)},write:b,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){w(this)}};var R;try{R=Q.Stream}catch{R=function(){}}R||(R=function(){});var u=E.EVENTS.filter(function(e){return e!=="error"&&e!=="end"});function o(e,t){return new c(e,t)}function c(e,t){if(!(this instanceof c))return new c(e,t);R.apply(this),this._parser=new m(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(r){n.emit("error",r),n._parser.error=null},this._decoder=null,u.forEach(function(r){Object.defineProperty(n,"on"+r,{get:function(){return n._parser["on"+r]},set:function(A){if(!A)return n.removeAllListeners(r),n._parser["on"+r]=A,A;n.on(r,A)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(R.prototype,{constructor:{value:c}}),c.prototype.write=function(e){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(e)){if(!this._decoder){var t=Q.StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},c.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},c.prototype.on=function(e,t){var n=this;return!n._parser["on"+e]&&u.indexOf(e)!==-1&&(n._parser["on"+e]=function(){var r=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);r.splice(0,0,e),n.emit.apply(n,r)}),R.prototype.on.call(n,e,t)};var p="[CDATA[",d="DOCTYPE",a="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/",l={xml:a,xmlns:s},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,L=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function q(e){return e===" "||e===`
`||e==="\r"||e==="	"}function $(e){return e==='"'||e==="'"}function F(e){return e===">"||q(e)}function D(e,t){return e.test(t)}function B(e,t){return!D(e,t)}var i=0;E.STATE={BEGIN:i++,BEGIN_WHITESPACE:i++,TEXT:i++,TEXT_ENTITY:i++,OPEN_WAKA:i++,SGML_DECL:i++,SGML_DECL_QUOTED:i++,DOCTYPE:i++,DOCTYPE_QUOTED:i++,DOCTYPE_DTD:i++,DOCTYPE_DTD_QUOTED:i++,COMMENT_STARTING:i++,COMMENT:i++,COMMENT_ENDING:i++,COMMENT_ENDED:i++,CDATA:i++,CDATA_ENDING:i++,CDATA_ENDING_2:i++,PROC_INST:i++,PROC_INST_BODY:i++,PROC_INST_ENDING:i++,OPEN_TAG:i++,OPEN_TAG_SLASH:i++,ATTRIB:i++,ATTRIB_NAME:i++,ATTRIB_NAME_SAW_WHITE:i++,ATTRIB_VALUE:i++,ATTRIB_VALUE_QUOTED:i++,ATTRIB_VALUE_CLOSED:i++,ATTRIB_VALUE_UNQUOTED:i++,ATTRIB_VALUE_ENTITY_Q:i++,ATTRIB_VALUE_ENTITY_U:i++,CLOSE_TAG:i++,CLOSE_TAG_SAW_WHITE:i++,SCRIPT:i++,SCRIPT_ENDING:i++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(e){var t=E.ENTITIES[e],n=typeof t=="number"?String.fromCharCode(t):t;E.ENTITIES[e]=n});for(var x in E.STATE)E.STATE[E.STATE[x]]=x;i=E.STATE;function U(e,t,n){e[t]&&e[t](n)}function C(e,t,n){e.textNode&&j(e),U(e,t,n)}function j(e){e.textNode=K(e.opt,e.textNode),e.textNode&&U(e,"ontext",e.textNode),e.textNode=""}function K(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function z(e,t){return j(e),e.trackPosition&&(t+=`
Line: `+e.line+`
Column: `+e.column+`
Char: `+e.c),t=new Error(t),e.error=t,U(e,"onerror",t),e}function G(e){return e.sawRoot&&!e.closedRoot&&M(e,"Unclosed root tag"),e.state!==i.BEGIN&&e.state!==i.BEGIN_WHITESPACE&&e.state!==i.TEXT&&z(e,"Unexpected end"),j(e),e.c="",e.closed=!0,U(e,"onend"),m.call(e,e.strict,e.opt),e}function M(e,t){if(typeof e!="object"||!(e instanceof m))throw new Error("bad call to strictFail");e.strict&&z(e,t)}function Z(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,C(e,"onopentagstart",n)}function J(e,t){var n=e.indexOf(":"),r=n<0?["",e]:e.split(":"),A=r[0],O=r[1];return t&&e==="xmlns"&&(A="xmlns",O=""),{prefix:A,local:O}}function I(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),e.attribList.indexOf(e.attribName)!==-1||e.tag.attributes.hasOwnProperty(e.attribName)){e.attribName=e.attribValue="";return}if(e.opt.xmlns){var t=J(e.attribName,!0),n=t.prefix,r=t.local;if(n==="xmlns")if(r==="xml"&&e.attribValue!==a)M(e,"xml: prefix must be bound to "+a+`
Actual: `+e.attribValue);else if(r==="xmlns"&&e.attribValue!==s)M(e,"xmlns: prefix must be bound to "+s+`
Actual: `+e.attribValue);else{var A=e.tag,O=e.tags[e.tags.length-1]||e;A.ns===O.ns&&(A.ns=Object.create(O.ns)),A.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,C(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function P(e,t){if(e.opt.xmlns){var n=e.tag,r=J(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(M(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var A=e.tags[e.tags.length-1]||e;n.ns&&A.ns!==n.ns&&Object.keys(n.ns).forEach(function(we){C(e,"onopennamespace",{prefix:we,uri:n.ns[we]})});for(var O=0,N=e.attribList.length;O<N;O++){var k=e.attribList[O],W=k[0],re=k[1],X=J(W,!0),te=X.prefix,Xe=X.local,_e=te===""?"":n.ns[te]||"",de={name:W,value:re,prefix:te,local:Xe,uri:_e};te&&te!=="xmlns"&&!_e&&(M(e,"Unbound namespace prefix: "+JSON.stringify(te)),de.uri=te),e.tag.attributes[W]=de,C(e,"onattribute",de)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),C(e,"onopentag",e.tag),t||(!e.noscript&&e.tagName.toLowerCase()==="script"?e.state=i.SCRIPT:e.state=i.TEXT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function V(e){if(!e.tagName){M(e,"Weird empty close tag."),e.textNode+="</>",e.state=i.TEXT;return}if(e.script){if(e.tagName!=="script"){e.script+="</"+e.tagName+">",e.tagName="",e.state=i.SCRIPT;return}C(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){var A=e.tags[t];if(A.name!==r)M(e,"Unexpected close tag");else break}if(t<0){M(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",e.state=i.TEXT;return}e.tagName=n;for(var O=e.tags.length;O-- >t;){var N=e.tag=e.tags.pop();e.tagName=e.tag.name,C(e,"onclosetag",e.tagName);var k={};for(var W in N.ns)k[W]=N.ns[W];var re=e.tags[e.tags.length-1]||e;e.opt.xmlns&&N.ns!==re.ns&&Object.keys(N.ns).forEach(function(X){var te=N.ns[X];C(e,"onclosenamespace",{prefix:X,uri:te})})}t===0&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=i.TEXT}function H(e){var t=e.entity,n=t.toLowerCase(),r,A="";return e.ENTITIES[t]?e.ENTITIES[t]:e.ENTITIES[n]?e.ENTITIES[n]:(t=n,t.charAt(0)==="#"&&(t.charAt(1)==="x"?(t=t.slice(2),r=parseInt(t,16),A=r.toString(16)):(t=t.slice(1),r=parseInt(t,10),A=r.toString(10))),t=t.replace(/^0+/,""),isNaN(r)||A.toLowerCase()!==t?(M(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(r))}function Y(e,t){t==="<"?(e.state=i.OPEN_WAKA,e.startTagPosition=e.position):q(t)||(M(e,"Non-whitespace before first tag."),e.textNode=t,e.state=i.TEXT)}function v(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function b(e){var t=this;if(this.error)throw this.error;if(t.closed)return z(t,"Cannot write after close. Assign an onready handler.");if(e===null)return G(t);typeof e=="object"&&(e=e.toString());for(var n=0,r="";r=v(e,n++),t.c=r,!!r;)switch(t.trackPosition&&(t.position++,r===`
`?(t.line++,t.column=0):t.column++),t.state){case i.BEGIN:if(t.state=i.BEGIN_WHITESPACE,r==="\uFEFF")continue;Y(t,r);continue;case i.BEGIN_WHITESPACE:Y(t,r);continue;case i.TEXT:if(t.sawRoot&&!t.closedRoot){for(var A=n-1;r&&r!=="<"&&r!=="&";)r=v(e,n++),r&&t.trackPosition&&(t.position++,r===`
`?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(A,n-1)}r==="<"&&!(t.sawRoot&&t.closedRoot&&!t.strict)?(t.state=i.OPEN_WAKA,t.startTagPosition=t.position):(!q(r)&&(!t.sawRoot||t.closedRoot)&&M(t,"Text data outside of root node."),r==="&"?t.state=i.TEXT_ENTITY:t.textNode+=r);continue;case i.SCRIPT:r==="<"?t.state=i.SCRIPT_ENDING:t.script+=r;continue;case i.SCRIPT_ENDING:r==="/"?t.state=i.CLOSE_TAG:(t.script+="<"+r,t.state=i.SCRIPT);continue;case i.OPEN_WAKA:if(r==="!")t.state=i.SGML_DECL,t.sgmlDecl="";else if(!q(r))if(D(T,r))t.state=i.OPEN_TAG,t.tagName=r;else if(r==="/")t.state=i.CLOSE_TAG,t.tagName="";else if(r==="?")t.state=i.PROC_INST,t.procInstName=t.procInstBody="";else{if(M(t,"Unencoded <"),t.startTagPosition+1<t.position){var O=t.position-t.startTagPosition;r=new Array(O).join(" ")+r}t.textNode+="<"+r,t.state=i.TEXT}continue;case i.SGML_DECL:if(t.sgmlDecl+r==="--"){t.state=i.COMMENT,t.comment="",t.sgmlDecl="";continue}t.doctype&&t.doctype!==!0&&t.sgmlDecl?(t.state=i.DOCTYPE_DTD,t.doctype+="<!"+t.sgmlDecl+r,t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===p?(C(t,"onopencdata"),t.state=i.CDATA,t.sgmlDecl="",t.cdata=""):(t.sgmlDecl+r).toUpperCase()===d?(t.state=i.DOCTYPE,(t.doctype||t.sawRoot)&&M(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):r===">"?(C(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=i.TEXT):($(r)&&(t.state=i.SGML_DECL_QUOTED),t.sgmlDecl+=r);continue;case i.SGML_DECL_QUOTED:r===t.q&&(t.state=i.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case i.DOCTYPE:r===">"?(t.state=i.TEXT,C(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,r==="["?t.state=i.DOCTYPE_DTD:$(r)&&(t.state=i.DOCTYPE_QUOTED,t.q=r));continue;case i.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=i.DOCTYPE);continue;case i.DOCTYPE_DTD:r==="]"?(t.doctype+=r,t.state=i.DOCTYPE):r==="<"?(t.state=i.OPEN_WAKA,t.startTagPosition=t.position):$(r)?(t.doctype+=r,t.state=i.DOCTYPE_DTD_QUOTED,t.q=r):t.doctype+=r;continue;case i.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=i.DOCTYPE_DTD,t.q="");continue;case i.COMMENT:r==="-"?t.state=i.COMMENT_ENDING:t.comment+=r;continue;case i.COMMENT_ENDING:r==="-"?(t.state=i.COMMENT_ENDED,t.comment=K(t.opt,t.comment),t.comment&&C(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=i.COMMENT);continue;case i.COMMENT_ENDED:r!==">"?(M(t,"Malformed comment"),t.comment+="--"+r,t.state=i.COMMENT):t.doctype&&t.doctype!==!0?t.state=i.DOCTYPE_DTD:t.state=i.TEXT;continue;case i.CDATA:r==="]"?t.state=i.CDATA_ENDING:t.cdata+=r;continue;case i.CDATA_ENDING:r==="]"?t.state=i.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=i.CDATA);continue;case i.CDATA_ENDING_2:r===">"?(t.cdata&&C(t,"oncdata",t.cdata),C(t,"onclosecdata"),t.cdata="",t.state=i.TEXT):r==="]"?t.cdata+="]":(t.cdata+="]]"+r,t.state=i.CDATA);continue;case i.PROC_INST:r==="?"?t.state=i.PROC_INST_ENDING:q(r)?t.state=i.PROC_INST_BODY:t.procInstName+=r;continue;case i.PROC_INST_BODY:if(!t.procInstBody&&q(r))continue;r==="?"?t.state=i.PROC_INST_ENDING:t.procInstBody+=r;continue;case i.PROC_INST_ENDING:r===">"?(C(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=i.TEXT):(t.procInstBody+="?"+r,t.state=i.PROC_INST_BODY);continue;case i.OPEN_TAG:D(_,r)?t.tagName+=r:(Z(t),r===">"?P(t):r==="/"?t.state=i.OPEN_TAG_SLASH:(q(r)||M(t,"Invalid character in tag name"),t.state=i.ATTRIB));continue;case i.OPEN_TAG_SLASH:r===">"?(P(t,!0),V(t)):(M(t,"Forward-slash in opening tag not followed by >"),t.state=i.ATTRIB);continue;case i.ATTRIB:if(q(r))continue;r===">"?P(t):r==="/"?t.state=i.OPEN_TAG_SLASH:D(T,r)?(t.attribName=r,t.attribValue="",t.state=i.ATTRIB_NAME):M(t,"Invalid attribute name");continue;case i.ATTRIB_NAME:r==="="?t.state=i.ATTRIB_VALUE:r===">"?(M(t,"Attribute without value"),t.attribValue=t.attribName,I(t),P(t)):q(r)?t.state=i.ATTRIB_NAME_SAW_WHITE:D(_,r)?t.attribName+=r:M(t,"Invalid attribute name");continue;case i.ATTRIB_NAME_SAW_WHITE:if(r==="=")t.state=i.ATTRIB_VALUE;else{if(q(r))continue;M(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",C(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",r===">"?P(t):D(T,r)?(t.attribName=r,t.state=i.ATTRIB_NAME):(M(t,"Invalid attribute name"),t.state=i.ATTRIB)}continue;case i.ATTRIB_VALUE:if(q(r))continue;$(r)?(t.q=r,t.state=i.ATTRIB_VALUE_QUOTED):(t.opt.unquotedAttributeValues||z(t,"Unquoted attribute value"),t.state=i.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case i.ATTRIB_VALUE_QUOTED:if(r!==t.q){r==="&"?t.state=i.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}I(t),t.q="",t.state=i.ATTRIB_VALUE_CLOSED;continue;case i.ATTRIB_VALUE_CLOSED:q(r)?t.state=i.ATTRIB:r===">"?P(t):r==="/"?t.state=i.OPEN_TAG_SLASH:D(T,r)?(M(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=i.ATTRIB_NAME):M(t,"Invalid attribute name");continue;case i.ATTRIB_VALUE_UNQUOTED:if(!F(r)){r==="&"?t.state=i.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}I(t),r===">"?P(t):t.state=i.ATTRIB;continue;case i.CLOSE_TAG:if(t.tagName)r===">"?V(t):D(_,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=i.SCRIPT):(q(r)||M(t,"Invalid tagname in closing tag"),t.state=i.CLOSE_TAG_SAW_WHITE);else{if(q(r))continue;B(T,r)?t.script?(t.script+="</"+r,t.state=i.SCRIPT):M(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case i.CLOSE_TAG_SAW_WHITE:if(q(r))continue;r===">"?V(t):M(t,"Invalid characters in closing tag");continue;case i.TEXT_ENTITY:case i.ATTRIB_VALUE_ENTITY_Q:case i.ATTRIB_VALUE_ENTITY_U:var N,k;switch(t.state){case i.TEXT_ENTITY:N=i.TEXT,k="textNode";break;case i.ATTRIB_VALUE_ENTITY_Q:N=i.ATTRIB_VALUE_QUOTED,k="attribValue";break;case i.ATTRIB_VALUE_ENTITY_U:N=i.ATTRIB_VALUE_UNQUOTED,k="attribValue";break}if(r===";"){var W=H(t);t.opt.unparsedEntities&&!Object.values(E.XML_ENTITIES).includes(W)?(t.entity="",t.state=N,t.write(W)):(t[k]+=W,t.entity="",t.state=N)}else D(t.entity.length?S:L,r)?t.entity+=r:(M(t,"Invalid character in entity name"),t[k]+="&"+t.entity+r,t.entity="",t.state=N);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&g(t),t}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var r=16384,A=[],O,N,k=-1,W=arguments.length;if(!W)return"";for(var re="";++k<W;){var X=Number(arguments[k]);if(!isFinite(X)||X<0||X>1114111||t(X)!==X)throw RangeError("Invalid code point: "+X);X<=65535?A.push(X):(X-=65536,O=(X>>10)+55296,N=X%1024+56320,A.push(O,N)),(k+1===W||A.length>r)&&(re+=e.apply(null,A),A.length=0)}return re};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()})(f)}(he)),he}var ne,Re;function ue(){if(Re)return ne;Re=1;var f=ne&&ne.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};const E=f(Q),y=f(Q),m=Q,g={"http:":E.default,"https:":y.default},h=new Set([301,302,303,307,308]),w=new Set([429,503]),R=["connect","continue","information","socket","timeout","upgrade"],u=["aborted"];o.MinigetError=class extends Error{constructor(p,d){super(p),this.statusCode=d}},o.defaultOptions={maxRedirects:10,maxRetries:2,maxReconnects:0,backoff:{inc:100,max:1e4}};function o(c,p={}){var d;const a=Object.assign({},o.defaultOptions,p),s=new m.PassThrough({highWaterMark:a.highWaterMark});s.destroyed=s.aborted=!1;let l,T,_,L=0,S=0,q,$=0,F,D=!1,B=0,i,x=0;if(!((d=a.headers)===null||d===void 0)&&d.Range){let I=/bytes=(\d+)-(\d+)?/.exec(`${a.headers.Range}`);I&&(B=parseInt(I[1],10),i=parseInt(I[2],10))}a.acceptEncoding&&(a.headers=Object.assign({"Accept-Encoding":Object.keys(a.acceptEncoding).join(", ")},a.headers));const U=()=>_&&x>0,C=()=>!D||x===F,j=I=>{_=null,S=0;let P=a.backoff.inc,V=Math.min(P,a.backoff.max);q=setTimeout(M,V),s.emit("reconnect",$,I)},K=I=>p.method!=="HEAD"&&!C()&&$++<a.maxReconnects?(j(I),!0):!1,z=I=>{if(s.destroyed)return!1;if(U())return K(I.err);if((!I.err||I.err.message==="ENOTFOUND")&&S++<a.maxRetries){let P=I.retryAfter||Math.min(S*a.backoff.inc,a.backoff.max);return q=setTimeout(M,P),s.emit("retry",S,I.err),!0}return!1},G=(I,P)=>{for(let V of P)I.on(V,s.emit.bind(s,V))},M=()=>{let I={},P;try{let e=typeof c=="string"?new URL(c):c;I=Object.assign({},{host:e.host,hostname:e.hostname,path:e.pathname+e.search+e.hash,port:e.port,protocol:e.protocol}),e.username&&(I.auth=`${e.username}:${e.password}`),P=g[String(I.protocol)]}catch{}if(!P){s.emit("error",new o.MinigetError(`Invalid URL: ${c}`));return}if(Object.assign(I,a),D&&x>0){let e=x+B,t=i||"";I.headers=Object.assign({},I.headers,{Range:`bytes=${e}-${t}`})}if(a.transform){try{I=a.transform(I)}catch(e){s.emit("error",e);return}if((!I||I.protocol)&&(P=g[String(I?.protocol)],!P)){s.emit("error",new o.MinigetError("Invalid URL object from `transform` function"));return}}const V=e=>{s.destroyed||s.readableEnded||(Y(),z({err:e})?l.removeListener("close",H):s.emit("error",e))},H=()=>{Y(),z({})},Y=()=>{l.removeListener("close",H),T?.removeListener("data",v),_?.removeListener("end",b)},v=e=>{x+=e.length},b=()=>{Y(),K()||s.end()};l=P.request(I,e=>{if(!s.destroyed){if(h.has(e.statusCode)){if(L++>=a.maxRedirects)s.emit("error",new o.MinigetError("Too many redirects"));else{if(e.headers.location)c=e.headers.location;else{let t=new o.MinigetError("Redirect status code given with no location",e.statusCode);s.emit("error",t),Y();return}setTimeout(M,parseInt(e.headers["retry-after"]||"0",10)*1e3),s.emit("redirect",c)}Y();return}else if(w.has(e.statusCode)){if(!z({retryAfter:parseInt(e.headers["retry-after"]||"0",10)})){let t=new o.MinigetError(`Status code: ${e.statusCode}`,e.statusCode);s.emit("error",t)}Y();return}else if(e.statusCode&&(e.statusCode<200||e.statusCode>=400)){let t=new o.MinigetError(`Status code: ${e.statusCode}`,e.statusCode);e.statusCode>=500?V(t):s.emit("error",t),Y();return}if(_=e,a.acceptEncoding&&e.headers["content-encoding"])for(let t of e.headers["content-encoding"].split(", ").reverse()){let n=a.acceptEncoding[t];n&&(_=_.pipe(n()),_.on("error",V))}F||(F=parseInt(`${e.headers["content-length"]}`,10),D=e.headers["accept-ranges"]==="bytes"&&F>0&&a.maxReconnects>0),e.on("data",v),_.on("end",b),_.pipe(s,{end:!D}),T=e,s.emit("response",e),e.on("error",V),G(e,u)}}),l.on("error",V),l.on("close",H),G(l,R),s.destroyed&&J(...Z),s.emit("request",l),l.end()};s.abort=I=>{console.warn("`MinigetStream#abort()` has been deprecated in favor of `MinigetStream#destroy()`"),s.aborted=!0,s.emit("abort"),s.destroy(I)};let Z=[];const J=I=>{l.destroy(I),_?.unpipe(s),_?.destroy(),clearTimeout(q)};return s._destroy=(...I)=>{s.destroyed=!0,l?J(...I):Z=I},s.text=()=>new Promise((I,P)=>{let V="";s.setEncoding("utf8"),s.on("data",H=>V+=H),s.on("end",()=>I(V)),s.on("error",P)}),process.nextTick(M),s}return ne=o,ne}var fe={};const Je="4.11.5",He={version:Je};var Ae;function le(){return Ae||(Ae=1,function(f){var E={};const y=ue();f.between=(o,c,p)=>{let d;if(c instanceof RegExp){const a=o.match(c);if(!a)return"";d=a.index+a[0].length}else{if(d=o.indexOf(c),d===-1)return"";d+=c.length}return o=o.slice(d),d=o.indexOf(p),d===-1?"":(o=o.slice(0,d),o)},f.parseAbbreviatedNumber=o=>{const c=o.replace(",",".").replace(" ","").match(/([\d,.]+)([MK]?)/);if(c){let[,p,d]=c;return p=parseFloat(p),Math.round(d==="M"?p*1e6:d==="K"?p*1e3:p)}return null};const m=[{start:'"',end:'"'},{start:"'",end:"'"},{start:"`",end:"`"},{start:"/",end:"/",startPrefix:/(^|[[{:;,/])\s?$/}];f.cutAfterJS=o=>{let c,p;if(o[0]==="["?(c="[",p="]"):o[0]==="{"&&(c="{",p="}"),!c)throw new Error(`Can't cut unsupported JSON (need to begin with [ or { ) but got: ${o[0]}`);let d=null,a=!1,s=0,l;for(l=0;l<o.length;l++){if(!a&&d!==null&&o[l]===d.end){d=null;continue}else if(!a&&d===null){for(const T of m)if(o[l]===T.start&&(!T.startPrefix||o.substring(l-10,l).match(T.startPrefix))){d=T;break}if(d!==null)continue}if(a=o[l]==="\\"&&!a,d===null&&(o[l]===c?s++:o[l]===p&&s--,s===0))return o.substring(0,l+1)}throw Error("Can't cut unsupported JSON (no matching closing bracket found)")},f.playError=(o,c,p=Error)=>{let d=o&&o.playabilityStatus;return d&&c.includes(d.status)?new p(d.reason||d.messages&&d.messages[0]):null},f.exposedMiniget=(o,c={},p)=>{const d=y(o,p||c.requestOptions);return typeof c.requestCallback=="function"&&c.requestCallback(d),d},f.deprecate=(o,c,p,d,a)=>{Object.defineProperty(o,c,{get:()=>(console.warn(`\`${d}\` will be removed in a near future release, use \`${a}\` instead.`),p)})};const g=He,h=1e3*60*60*12;f.lastUpdateCheck=0,f.checkForUpdates=()=>!E.YTDL_NO_UPDATE&&!g.version.startsWith("0.0.0-")&&Date.now()-f.lastUpdateCheck>=h?(f.lastUpdateCheck=Date.now(),y("https://api.github.com/repos/fent/node-ytdl-core/releases/latest",{headers:{"User-Agent":"ytdl-core"}}).text().then(o=>{JSON.parse(o).tag_name!==`v${g.version}`&&console.warn('\x1B[33mWARNING:\x1B[0m ytdl-core is out of date! Update with "npm install ytdl-core@latest".')},o=>{console.warn("Error checking for updates:",o.message),console.warn("You can disable this check by setting the `YTDL_NO_UPDATE` env variable.")})):null,f.getRandomIPv6=o=>{if(!R(o))throw Error("Invalid IPv6 format");const[c,p]=o.split("/");let d=parseInt(p);if(!d||d>128||d<24)throw Error("Invalid IPv6 subnet");const a=u(c);return new Array(8).fill(1).map(()=>Math.floor(Math.random()*65535)).map((T,_)=>{const L=Math.min(d,16);d-=L;const S=65535-(2**(16-L)-1);return(a[_]&S)+(T&(S^65535))}).map(T=>T.toString("16")).join(":")};const w=/^(([0-9a-f]{1,4}:)(:[0-9a-f]{1,4}){1,6}|([0-9a-f]{1,4}:){1,2}(:[0-9a-f]{1,4}){1,5}|([0-9a-f]{1,4}:){1,3}(:[0-9a-f]{1,4}){1,4}|([0-9a-f]{1,4}:){1,4}(:[0-9a-f]{1,4}){1,3}|([0-9a-f]{1,4}:){1,5}(:[0-9a-f]{1,4}){1,2}|([0-9a-f]{1,4}:){1,6}(:[0-9a-f]{1,4})|([0-9a-f]{1,4}:){1,7}(([0-9a-f]{1,4})|:))\/(1[0-1]\d|12[0-8]|\d{1,2})$/,R=f.isIPv6=o=>w.test(o),u=f.normalizeIP=o=>{const c=o.split("::").map(s=>s.split(":")),p=c[0]||[],d=c[1]||[];d.reverse();const a=new Array(8).fill(0);for(let s=0;s<Math.min(p.length,8);s++)a[s]=parseInt(p[s],16)||0;for(let s=0;s<Math.min(d.length,8);s++)a[7-s]=parseInt(d[s],16)||0;return a}}(fe)),fe}var pe={},be,De;function et(){return De||(De=1,be={5:{mimeType:'video/flv; codecs="Sorenson H.283, mp3"',qualityLabel:"240p",bitrate:25e4,audioBitrate:64},6:{mimeType:'video/flv; codecs="Sorenson H.263, mp3"',qualityLabel:"270p",bitrate:8e5,audioBitrate:64},13:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:null,bitrate:5e5,audioBitrate:null},17:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"144p",bitrate:5e4,audioBitrate:24},18:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},22:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},34:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},35:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},36:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"240p",bitrate:175e3,audioBitrate:32},37:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},38:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"3072p",bitrate:35e5,audioBitrate:192},43:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},44:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"480p",bitrate:1e6,audioBitrate:128},45:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},46:{mimeType:'audio/webm; codecs="vp8, vorbis"',qualityLabel:"1080p",bitrate:null,audioBitrate:192},82:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},83:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"240p",bitrate:5e5,audioBitrate:96},84:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},85:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},91:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"144p",bitrate:1e5,audioBitrate:48},92:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},93:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},94:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},95:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:15e5,audioBitrate:256},96:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:256},100:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:128},101:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:192},102:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:null,audioBitrate:192},120:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:128},127:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},128:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},132:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},133:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"240p",bitrate:2e5,audioBitrate:null},134:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"360p",bitrate:3e5,audioBitrate:null},135:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},136:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:1e6,audioBitrate:null},137:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},138:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"4320p",bitrate:135e5,audioBitrate:null},139:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:48},140:{mimeType:'audio/m4a; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:128},141:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:256},151:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:5e4,audioBitrate:24},160:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"144p",bitrate:1e5,audioBitrate:null},171:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:128},172:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:192},242:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p",bitrate:1e5,audioBitrate:null},243:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p",bitrate:25e4,audioBitrate:null},244:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},247:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:7e5,audioBitrate:null},248:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p",bitrate:15e5,audioBitrate:null},249:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:48},250:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:64},251:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:160},264:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1440p",bitrate:4e6,audioBitrate:null},266:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"2160p",bitrate:125e5,audioBitrate:null},271:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p",bitrate:9e6,audioBitrate:null},272:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"4320p",bitrate:2e7,audioBitrate:null},278:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p 30fps",bitrate:8e4,audioBitrate:null},298:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:3e6,audioBitrate:null},299:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:55e5,audioBitrate:null},300:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:1318e3,audioBitrate:48},302:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HFR",bitrate:25e5,audioBitrate:null},303:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HFR",bitrate:5e6,audioBitrate:null},308:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HFR",bitrate:1e7,audioBitrate:null},313:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p",bitrate:13e6,audioBitrate:null},315:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HFR",bitrate:2e7,audioBitrate:null},330:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p HDR, HFR",bitrate:8e4,audioBitrate:null},331:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:1e5,audioBitrate:null},332:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p HDR, HFR",bitrate:25e4,audioBitrate:null},333:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:5e5,audioBitrate:null},334:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HDR, HFR",bitrate:1e6,audioBitrate:null},335:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HDR, HFR",bitrate:15e5,audioBitrate:null},336:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HDR, HFR",bitrate:5e6,audioBitrate:null},337:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HDR, HFR",bitrate:12e6,audioBitrate:null}}),be}var Le;function $e(){return Le||(Le=1,function(f){const E=le(),y=et(),m=["mp4a","mp3","vorbis","aac","opus","flac"],g=["mp4v","avc1","Sorenson H.283","MPEG-4 Visual","VP8","VP9","H.264"],h=a=>a.bitrate||0,w=a=>g.findIndex(s=>a.codecs&&a.codecs.includes(s)),R=a=>a.audioBitrate||0,u=a=>m.findIndex(s=>a.codecs&&a.codecs.includes(s)),o=(a,s,l)=>{let T=0;for(let _ of l)if(T=_(s)-_(a),T!==0)break;return T},c=(a,s)=>o(a,s,[l=>parseInt(l.qualityLabel),h,w]),p=(a,s)=>o(a,s,[R,u]);f.sortFormats=(a,s)=>o(a,s,[l=>+!!l.isHLS,l=>+!!l.isDashMPD,l=>+(l.contentLength>0),l=>+(l.hasVideo&&l.hasAudio),l=>+l.hasVideo,l=>parseInt(l.qualityLabel)||0,h,R,w,u]),f.chooseFormat=(a,s)=>{if(typeof s.format=="object"){if(!s.format.url)throw Error("Invalid format given, did you use `ytdl.getInfo()`?");return s.format}s.filter&&(a=f.filterFormats(a,s.filter)),a.some(_=>_.isHLS)&&(a=a.filter(_=>_.isHLS||!_.isLive));let l;const T=s.quality||"highest";switch(T){case"highest":l=a[0];break;case"lowest":l=a[a.length-1];break;case"highestaudio":{a=f.filterFormats(a,"audio"),a.sort(p);const _=a[0];a=a.filter(S=>p(_,S)===0);const L=a.map(S=>parseInt(S.qualityLabel)||0).sort((S,q)=>S-q)[0];l=a.find(S=>(parseInt(S.qualityLabel)||0)===L);break}case"lowestaudio":a=f.filterFormats(a,"audio"),a.sort(p),l=a[a.length-1];break;case"highestvideo":{a=f.filterFormats(a,"video"),a.sort(c);const _=a[0];a=a.filter(S=>c(_,S)===0);const L=a.map(S=>S.audioBitrate||0).sort((S,q)=>S-q)[0];l=a.find(S=>(S.audioBitrate||0)===L);break}case"lowestvideo":a=f.filterFormats(a,"video"),a.sort(c),l=a[a.length-1];break;default:l=d(T,a);break}if(!l)throw Error(`No such format found: ${T}`);return l};const d=(a,s)=>{let l=T=>s.find(_=>`${_.itag}`==`${T}`);return Array.isArray(a)?l(a.find(T=>l(T))):l(a)};f.filterFormats=(a,s)=>{let l;switch(s){case"videoandaudio":case"audioandvideo":l=T=>T.hasVideo&&T.hasAudio;break;case"video":l=T=>T.hasVideo;break;case"videoonly":l=T=>T.hasVideo&&!T.hasAudio;break;case"audio":l=T=>T.hasAudio;break;case"audioonly":l=T=>!T.hasVideo&&T.hasAudio;break;default:if(typeof s=="function")l=s;else throw TypeError(`Given filter (${s}) is not supported`)}return a.filter(T=>!!T.url&&l(T))},f.addFormatMeta=a=>(a=Object.assign({},y[a.itag],a),a.hasVideo=!!a.qualityLabel,a.hasAudio=!!a.audioBitrate,a.container=a.mimeType?a.mimeType.split(";")[0].split("/")[1]:null,a.codecs=a.mimeType?E.between(a.mimeType,'codecs="','"'):null,a.videoCodec=a.hasVideo&&a.codecs?a.codecs.split(", ")[0]:null,a.audioCodec=a.hasAudio&&a.codecs?a.codecs.split(", ").slice(-1)[0]:null,a.isLive=/\bsource[/=]yt_live_broadcast\b/.test(a.url),a.isHLS=/\/manifest\/hls_(variant|playlist)\//.test(a.url),a.isDashMPD=/\/manifest\/dash\//.test(a.url),a)}(pe)),pe}var ge={},Ne;function je(){return Ne||(Ne=1,function(f){const E=new Set(["youtube.com","www.youtube.com","m.youtube.com","music.youtube.com","gaming.youtube.com"]),y=/^https?:\/\/(youtu\.be\/|(www\.)?youtube\.com\/(embed|v|shorts)\/)/;f.getURLVideoID=h=>{const w=new URL(h.trim());let R=w.searchParams.get("v");if(y.test(h.trim())&&!R){const u=w.pathname.split("/");R=w.host==="youtu.be"?u[1]:u[2]}else if(w.hostname&&!E.has(w.hostname))throw Error("Not a YouTube domain");if(!R)throw Error(`No video id found: "${h}"`);if(R=R.substring(0,11),!f.validateID(R))throw TypeError(`Video id (${R}) does not match expected format (${g.toString()})`);return R};const m=/^https?:\/\//;f.getVideoID=h=>{if(f.validateID(h))return h;if(m.test(h.trim()))return f.getURLVideoID(h);throw Error(`No video id found: ${h}`)};const g=/^[a-zA-Z0-9-_]{11}$/;f.validateID=h=>g.test(h.trim()),f.validateURL=h=>{try{return f.getURLVideoID(h),!0}catch{return!1}}}(ge)),ge}var ee={},ce={},Se;function tt(){if(Se)return ce;Se=1,Object.defineProperty(ce,"__esModule",{value:!0});const f=Q;let E=class extends f.Writable{constructor(){super(),this._lastLine="",this._seq=0,this._nextItemDuration=null,this._nextItemRange=null,this._lastItemRangeEnd=0,this.on("finish",()=>{this._parseLine(this._lastLine),this.emit("end")})}_parseAttrList(m){let g={},h=/([A-Z0-9-]+)=(?:"([^"]*?)"|([^,]*?))/g,w;for(;(w=h.exec(m))!==null;)g[w[1]]=w[2]||w[3];return g}_parseRange(m){if(!m)return null;let g=m.split("@"),h=g[1]?parseInt(g[1]):this._lastItemRangeEnd+1,w=h+parseInt(g[0])-1,R={start:h,end:w};return this._lastItemRangeEnd=R.end,R}_parseLine(m){let g=m.match(/^#(EXT[A-Z0-9-]+)(?::(.*))?/);if(g){const h=g[1],w=g[2]||"";switch(h){case"EXT-X-PROGRAM-DATE-TIME":this.emit("starttime",new Date(w).getTime());break;case"EXT-X-MEDIA-SEQUENCE":this._seq=parseInt(w);break;case"EXT-X-MAP":{let R=this._parseAttrList(w);if(!R.URI){this.destroy(new Error("`EXT-X-MAP` found without required attribute `URI`"));return}this.emit("item",{url:R.URI,seq:this._seq,init:!0,duration:0,range:this._parseRange(R.BYTERANGE)});break}case"EXT-X-BYTERANGE":{this._nextItemRange=this._parseRange(w);break}case"EXTINF":this._nextItemDuration=Math.round(parseFloat(w.split(",")[0])*1e3);break;case"EXT-X-ENDLIST":this.emit("endlist");break}}else!/^#/.test(m)&&m.trim()&&(this.emit("item",{url:m.trim(),seq:this._seq++,duration:this._nextItemDuration,range:this._nextItemRange}),this._nextItemRange=null)}_write(m,g,h){let w=m.toString("utf8").split(`
`);this._lastLine&&(w[0]=this._lastLine+w[0]),w.forEach((R,u)=>{this.destroyed||(u<w.length-1?this._parseLine(R):this._lastLine=R)}),h()}};return ce.default=E,ce}var ie={},ae={},Ce;function Ge(){if(Ce)return ae;Ce=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.durationStr=ae.humanStr=void 0;const f=/^\d+$/,E=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,y={ms:1,s:1e3,m:6e4,h:36e5};return ae.humanStr=m=>{if(typeof m=="number")return m;if(f.test(m))return+m;const g=E.exec(m);if(g)return+(g[1]||0)*y.h+ +(g[2]||0)*y.m+ +g[3]*y.s+ +(g[4]||0);{let h=0;const w=/(-?\d+)(ms|s|m|h)/g;let R;for(;(R=w.exec(m))!==null;)h+=+R[1]*y[R[2]];return h}},ae.durationStr=m=>{let g=0;const h=/(\d+(?:\.\d+)?)(S|M|H)/g;let w;for(;(w=h.exec(m))!==null;)g+=+w[1]*y[w[2].toLowerCase()];return g},ae}var Oe;function at(){if(Oe)return ie;Oe=1;var f=ie&&ie.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ie,"__esModule",{value:!0});const E=Q,y=f(ke()),m=Ge();class g extends E.Writable{constructor(w){super(),this._parser=y.default.createStream(!1,{lowercase:!0}),this._parser.on("error",this.destroy.bind(this));let R,u=0,o=0,c,p,d,a,s,l=[],T=!1,_=!1,L,S,q;const $=D=>{const B={RepresentationID:w,Number:o,Time:u};return D.replace(/\$(\w+)\$/g,(i,x)=>`${B[x]}`)};this._parser.on("opentag",D=>{switch(D.name){case"mpd":u=D.attributes.availabilitystarttime?new Date(D.attributes.availabilitystarttime).getTime():0,L=D.attributes.type!=="dynamic";break;case"period":o=0,p=1e3,a=0,d=0,s=[],S=0,q=m.durationStr(D.attributes.start)||0;break;case"segmentlist":o=parseInt(D.attributes.startnumber)||o,p=parseInt(D.attributes.timescale)||p,a=parseInt(D.attributes.duration)||a,d=parseInt(D.attributes.presentationtimeoffset)||d;break;case"segmenttemplate":c=D.attributes,o=parseInt(D.attributes.startnumber)||o,p=parseInt(D.attributes.timescale)||p;break;case"segmenttimeline":case"baseurl":R=D.name;break;case"s":l.push({duration:parseInt(D.attributes.d),repeat:parseInt(D.attributes.r),time:parseInt(D.attributes.t)});break;case"adaptationset":case"representation":S++,w||(w=D.attributes.id),T=D.attributes.id===`${w}`,T&&(q&&(u+=q),d&&(u-=d/p*1e3),this.emit("starttime",u));break;case"initialization":T&&this.emit("item",{url:s.filter(B=>!!B).join("")+D.attributes.sourceurl,seq:o,init:!0,duration:0});break;case"segmenturl":if(T){_=!0;let B=l.shift(),i=(B?.duration||a)/p*1e3;this.emit("item",{url:s.filter(x=>!!x).join("")+D.attributes.media,seq:o++,duration:i}),u+=i}break}});const F=()=>{L&&this.emit("endlist"),T?this.emit("end"):this.destroy(Error(`Representation '${w}' not found`))};this._parser.on("closetag",D=>{switch(D){case"adaptationset":case"representation":if(S--,c&&l.length){_=!0,c.initialization&&this.emit("item",{url:s.filter(B=>!!B).join("")+$(c.initialization),seq:o,init:!0,duration:0});for(let{duration:B,repeat:i,time:x}of l){B=B/p*1e3,i=i||1,u=x||u;for(let U=0;U<i;U++)this.emit("item",{url:s.filter(C=>!!C).join("")+$(c.media),seq:o++,duration:B}),u+=B}}_&&(this.emit("endearly"),F(),this._parser.removeAllListeners(),this.removeAllListeners("finish"));break}}),this._parser.on("text",D=>{R==="baseurl"&&(s[S]=D,R=null)}),this.on("finish",F)}_write(w,R,u){this._parser.write(w),u()}}return ie.default=g,ie}var se={},Be;function rt(){if(Be)return se;Be=1,Object.defineProperty(se,"__esModule",{value:!0}),se.Queue=void 0;class f{constructor(y,m={}){this._worker=y,this._concurrency=m.concurrency||1,this.tasks=[],this.total=0,this.active=0}push(y,m){this.tasks.push({item:y,callback:m}),this.total++,this._next()}_next(){if(this.active>=this._concurrency||!this.tasks.length)return;const{item:y,callback:m}=this.tasks.shift();let g=!1;this.active++,this._worker(y,(h,w)=>{g||(this.active--,g=!0,m?.(h,w),this._next())})}die(){this.tasks=[]}}return se.Queue=f,se}var oe,Pe;function ve(){if(Pe)return oe;Pe=1;var f=oe&&oe.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};const E=Q,y=f(ue()),m=f(tt()),g=f(at()),h=rt(),w=Ge(),R={m3u8:m.default,"dash-mpd":g.default};let u=(o,c={})=>{const p=new E.PassThrough({highWaterMark:c.highWaterMark}),d=c.chunkReadahead||3,a=c.liveBuffer||2e4,s=c.requestOptions,l=R[c.parser||(/\.mpd$/.test(o)?"dash-mpd":"m3u8")];if(!l)throw TypeError(`parser '${c.parser}' not supported`);let T=0;typeof c.begin<"u"&&(T=typeof c.begin=="string"?w.humanStr(c.begin):Math.max(c.begin-a,0));const _=I=>{for(let P of["abort","request","response","redirect","retry","reconnect"])I.on(P,p.emit.bind(p,P))};let L;const S=new h.Queue((I,P)=>{L=I;let V=0;I.on("data",H=>V+=H.length),I.pipe(p,{end:!1}),I.on("end",()=>P(null,V))},{concurrency:1});let q=0,$=0;const F=new h.Queue((I,P)=>{let V=Object.assign({},s);I.range&&(V.headers=Object.assign({},V.headers,{Range:`bytes=${I.range.start}-${I.range.end}`}));let H=y.default(new URL(I.url,o).toString(),V);H.on("error",P),_(H),S.push(H,(Y,v)=>{$+=+v,p.emit("progress",{num:++q,size:v,duration:I.duration,url:I.url},F.total,$),P(null)})},{concurrency:d}),D=I=>{p.emit("error",I),p.end()};let B,i,x,U=!0,C=!1,j=!1,K;const z=I=>{if(L=null,I)D(I);else if(!U&&!C&&!j&&F.tasks.length+F.active<=B){let P=Math.max(0,i-(Date.now()-K));U=!0,x=setTimeout(J,P)}else(C||j)&&!F.tasks.length&&!F.active&&p.end()};let G,M,Z=0;const J=()=>{K=Date.now(),G=y.default(o,s),G.on("error",D),_(G);const I=G.pipe(new l(c.id));I.on("starttime",v=>{Z||(Z=v,typeof c.begin=="string"&&T>=0&&(T+=Z))}),I.on("endlist",()=>{j=!0}),I.on("endearly",G.unpipe.bind(G,I));let P=[];const V=v=>{if(!v.init){if(v.seq<=M)return;M=v.seq}T=v.time,F.push(v,z),P.push(v)};let H=[],Y=0;I.on("item",v=>{let b=Object.assign({time:Z},v);if(T<=b.time)V(b);else for(H.push(b),Y+=b.duration;H.length>1&&Y-H[0].duration>a;){const e=H.shift();Y-=e.duration}Z+=b.duration}),I.on("end",()=>{G=null,!P.length&&H.length&&H.forEach(v=>{V(v)}),B=Math.max(1,Math.ceil(P.length*.01)),i=P.reduce((v,b)=>b.duration+v,0),U=!1,z(null)})};return J(),p.end=()=>(C=!0,S.die(),F.die(),clearTimeout(x),G?.destroy(),L?.destroy(),E.PassThrough.prototype.end.call(p,null),p),p};return u.parseTimestamp=w.humanStr,oe=u,oe}var Me;function it(){if(Me)return ee;Me=1;const f=le(),E=Q,{parseTimestamp:y}=ve(),m="https://www.youtube.com/watch?v=",g={song:{name:"Music",url:"https://music.youtube.com/"}},h=u=>u?u.runs?u.runs[0].text:u.simpleText:null;ee.getMedia=u=>{let o={},c=[];try{c=u.response.contents.twoColumnWatchNextResults.results.results.contents}catch{}let p=c.find(d=>d.videoSecondaryInfoRenderer);if(!p)return{};try{let d=(p.metadataRowContainer||p.videoSecondaryInfoRenderer.metadataRowContainer).metadataRowContainerRenderer.rows;for(let a of d)if(a.metadataRowRenderer){let s=h(a.metadataRowRenderer.title).toLowerCase(),l=a.metadataRowRenderer.contents[0];o[s]=h(l);let T=l.runs;T&&T[0].navigationEndpoint&&(o[`${s}_url`]=new URL(T[0].navigationEndpoint.commandMetadata.webCommandMetadata.url,m).toString()),s in g&&(o.category=g[s].name,o.category_url=g[s].url)}else if(a.richMetadataRowRenderer){let s=a.richMetadataRowRenderer.contents,l=s.filter(_=>_.richMetadataRenderer.style==="RICH_METADATA_RENDERER_STYLE_BOX_ART");for(let{richMetadataRenderer:_}of l){let L=_;o.year=h(L.subtitle);let S=h(L.callToAction).split(" ")[1];o[S]=h(L.title),o[`${S}_url`]=new URL(L.endpoint.commandMetadata.webCommandMetadata.url,m).toString(),o.thumbnails=L.thumbnail.thumbnails}let T=s.filter(_=>_.richMetadataRenderer.style==="RICH_METADATA_RENDERER_STYLE_TOPIC");for(let{richMetadataRenderer:_}of T){let L=_;o.category=h(L.title),o.category_url=new URL(L.endpoint.commandMetadata.webCommandMetadata.url,m).toString()}}}catch{}return o};const w=u=>!!(u&&u.find(o=>o.metadataBadgeRenderer.tooltip==="Verified"));ee.getAuthor=u=>{let o,c=[],p,d=!1;try{let l=u.response.contents.twoColumnWatchNextResults.results.results.contents.find(T=>T.videoSecondaryInfoRenderer&&T.videoSecondaryInfoRenderer.owner&&T.videoSecondaryInfoRenderer.owner.videoOwnerRenderer).videoSecondaryInfoRenderer.owner.videoOwnerRenderer;o=l.navigationEndpoint.browseEndpoint.browseId,c=l.thumbnail.thumbnails.map(T=>(T.url=new URL(T.url,m).toString(),T)),p=f.parseAbbreviatedNumber(h(l.subscriberCountText)),d=w(l.badges)}catch{}try{let a=u.player_response.microformat&&u.player_response.microformat.playerMicroformatRenderer,s=a&&a.channelId||o||u.player_response.videoDetails.channelId,l={id:s,name:a?a.ownerChannelName:u.player_response.videoDetails.author,user:a?a.ownerProfileUrl.split("/").slice(-1)[0]:null,channel_url:`https://www.youtube.com/channel/${s}`,external_channel_url:a?`https://www.youtube.com/channel/${a.externalChannelId}`:"",user_url:a?new URL(a.ownerProfileUrl,m).toString():"",thumbnails:c,verified:d,subscriber_count:p};return c.length&&f.deprecate(l,"avatar",l.thumbnails[0].url,"author.avatar","author.thumbnails[0].url"),l}catch{return{}}};const R=(u,o)=>{if(u)try{let c=h(u.viewCountText),p=h(u.shortViewCountText),d=o.find(L=>L.id===u.videoId);/^\d/.test(p)||(p=d&&d.short_view_count_text||""),c=(/^\d/.test(c)?c:p).split(" ")[0];let a=u.shortBylineText.runs[0].navigationEndpoint.browseEndpoint,s=a.browseId,l=h(u.shortBylineText),T=(a.canonicalBaseUrl||"").split("/").slice(-1)[0],_={id:u.videoId,title:h(u.title),published:h(u.publishedTimeText),author:{id:s,name:l,user:T,channel_url:`https://www.youtube.com/channel/${s}`,user_url:`https://www.youtube.com/user/${T}`,thumbnails:u.channelThumbnail.thumbnails.map(L=>(L.url=new URL(L.url,m).toString(),L)),verified:w(u.ownerBadges),[Symbol.toPrimitive](){return console.warn("`relatedVideo.author` will be removed in a near future release, use `relatedVideo.author.name` instead."),_.author.name}},short_view_count_text:p.split(" ")[0],view_count:c.replace(/,/g,""),length_seconds:u.lengthText?Math.floor(y(h(u.lengthText))/1e3):o&&`${o.length_seconds}`,thumbnails:u.thumbnail.thumbnails,richThumbnails:u.richThumbnail?u.richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails:[],isLive:!!(u.badges&&u.badges.find(L=>L.metadataBadgeRenderer.label==="LIVE NOW"))};return f.deprecate(_,"author_thumbnail",_.author.thumbnails[0].url,"relatedVideo.author_thumbnail","relatedVideo.author.thumbnails[0].url"),f.deprecate(_,"ucid",_.author.id,"relatedVideo.ucid","relatedVideo.author.id"),f.deprecate(_,"video_thumbnail",_.thumbnails[0].url,"relatedVideo.video_thumbnail","relatedVideo.thumbnails[0].url"),_}catch{}};return ee.getRelatedVideos=u=>{let o=[],c=[];try{o=u.response.webWatchNextResponseExtensionData.relatedVideoArgs.split(",").map(d=>E.parse(d))}catch{}try{c=u.response.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results}catch{return[]}let p=[];for(let d of c||[]){let a=d.compactVideoRenderer;if(a){let s=R(a,o);s&&p.push(s)}else{let s=d.compactAutoplayRenderer||d.itemSectionRenderer;if(!s||!Array.isArray(s.contents))continue;for(let l of s.contents){let T=R(l.compactVideoRenderer,o);T&&p.push(T)}}}return p},ee.getLikes=u=>{try{let d=u.response.contents.twoColumnWatchNextResults.results.results.contents.find(a=>a.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(a=>a.toggleButtonRenderer&&a.toggleButtonRenderer.defaultIcon.iconType==="LIKE");return parseInt(d.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch{return null}},ee.getDislikes=u=>{try{let d=u.response.contents.twoColumnWatchNextResults.results.results.contents.find(a=>a.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(a=>a.toggleButtonRenderer&&a.toggleButtonRenderer.defaultIcon.iconType==="DISLIKE");return parseInt(d.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch{return null}},ee.cleanVideoDetails=(u,o)=>(u.thumbnails=u.thumbnail.thumbnails,delete u.thumbnail,f.deprecate(u,"thumbnail",{thumbnails:u.thumbnails},"videoDetails.thumbnail.thumbnails","videoDetails.thumbnails"),u.description=u.shortDescription||h(u.description),delete u.shortDescription,f.deprecate(u,"shortDescription",u.description,"videoDetails.shortDescription","videoDetails.description"),u.lengthSeconds=o.player_response.microformat&&o.player_response.microformat.playerMicroformatRenderer.lengthSeconds||o.player_response.videoDetails.lengthSeconds,u),ee.getStoryboards=u=>{const o=u.player_response.storyboards&&u.player_response.storyboards.playerStoryboardSpecRenderer&&u.player_response.storyboards.playerStoryboardSpecRenderer.spec&&u.player_response.storyboards.playerStoryboardSpecRenderer.spec.split("|");if(!o)return[];const c=new URL(o.shift());return o.map((p,d)=>{let[a,s,l,T,_,L,S,q]=p.split("#");c.searchParams.set("sigh",q),l=parseInt(l,10),T=parseInt(T,10),_=parseInt(_,10);const $=Math.ceil(l/(T*_));return{templateUrl:c.toString().replace("$L",d).replace("$N",S),thumbnailWidth:parseInt(a,10),thumbnailHeight:parseInt(s,10),thumbnailCount:l,interval:parseInt(L,10),columns:T,rows:_,storyboardCount:$}})},ee.getChapters=u=>{const o=u.response&&u.response.playerOverlays&&u.response.playerOverlays.playerOverlayRenderer,c=o&&o.decoratedPlayerBarRenderer&&o.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer&&o.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer.playerBar,p=c&&c.multiMarkersPlayerBarRenderer&&c.multiMarkersPlayerBarRenderer.markersMap,d=Array.isArray(p)&&p.find(s=>s.value&&Array.isArray(s.value.chapters));return d?d.value.chapters.map(s=>({title:h(s.chapterRenderer.title),start_time:s.chapterRenderer.timeRangeStartMillis/1e3})):[]},ee}var ye={},Te,qe;function We(){if(qe)return Te;qe=1;const{setTimeout:f}=Q;return Te=class extends Map{constructor(y=1e3){super(),this.timeout=y}set(y,m){this.has(y)&&clearTimeout(super.get(y).tid),super.set(y,{tid:f(this.delete.bind(this,y),this.timeout).unref(),value:m})}get(y){let m=super.get(y);return m?m.value:null}getOrSet(y,m){if(this.has(y))return this.get(y);{let g=m();return this.set(y,g),(async()=>{try{await g}catch{this.delete(y)}})(),g}}delete(y){let m=super.get(y);m&&(clearTimeout(m.tid),super.delete(y))}clear(){for(let y of this.values())clearTimeout(y.tid);super.clear()}},Te}var Fe;function Ye(){return Fe||(Fe=1,function(f){const E=Q,y=We(),m=le(),g=Q;f.cache=new y,f.getFunctions=(h,w)=>f.cache.getOrSet(h,async()=>{const R=await m.exposedMiniget(h,w).text(),u=f.extractFunctions(R);if(!u||!u.length)throw Error("Could not extract functions");return f.cache.set(h,u),u}),f.extractFunctions=h=>{const w=[],R=c=>{const p=m.between(c,'a=a.split("");',".");if(!p)return"";const d=`var ${p}={`,a=h.indexOf(d);if(a<0)return"";const s=h.slice(a+d.length-1);return`var ${p}=${m.cutAfterJS(s)}`},u=()=>{const c=m.between(h,'a.set("alr","yes");c&&(c=',"(decodeURIC");if(c&&c.length){const p=`${c}=function(a)`,d=h.indexOf(p);if(d>=0){const a=h.slice(d+p.length);let s=`var ${p}${m.cutAfterJS(a)}`;s=`${R(s)};${s};${c}(sig);`,w.push(s)}}},o=()=>{let c=m.between(h,'&&(b=a.get("n"))&&(b=',"(b)");if(c.includes("[")&&(c=m.between(h,`var ${c.split("[")[0]}=[`,"]")),c&&c.length){const p=`${c}=function(a)`,d=h.indexOf(p);if(d>=0){const a=h.slice(d+p.length),s=`var ${p}${m.cutAfterJS(a)};${c}(ncode);`;w.push(s)}}};return u(),o(),w},f.setDownloadURL=(h,w,R)=>{const u=d=>{const a=E.parse(d);if(!a.s||!w)return a.url;const s=new URL(decodeURIComponent(a.url));return s.searchParams.set(a.sp?a.sp:"signature",w.runInNewContext({sig:decodeURIComponent(a.s)})),s.toString()},o=d=>{const a=new URL(decodeURIComponent(d)),s=a.searchParams.get("n");return!s||!R?d:(a.searchParams.set("n",R.runInNewContext({ncode:s})),a.toString())},c=!h.url,p=h.url||h.signatureCipher||h.cipher;h.url=o(c?u(p):p),delete h.signatureCipher,delete h.cipher},f.decipherFormats=async(h,w,R)=>{let u={},o=await f.getFunctions(w,R);const c=o.length?new g.Script(o[0]):null,p=o.length>1?new g.Script(o[1]):null;return h.forEach(d=>{f.setDownloadURL(d,c,p),u[d.url]=d}),u}}(ye)),ye}var Ue;function nt(){return Ue||(Ue=1,function(f){const E=Q,y=ke(),m=ue(),g=le(),{setTimeout:h}=Q,w=$e(),R=je(),u=it(),o=Ye(),c=We(),p="https://www.youtube.com/watch?v=";f.cache=new c,f.cookieCache=new c(1e3*60*60*24),f.watchPageCache=new c;let d="2.20210622.10.00";class a extends Error{}const s=["support.google.com/youtube/?p=age_restrictions","youtube.com/t/community_guidelines"];f.getBasicInfo=async(v,b)=>{b.IPv6Block&&(b.requestOptions=Object.assign({},b.requestOptions,{family:6,localAddress:g.getRandomIPv6(b.IPv6Block)}));const e=Object.assign({},m.defaultOptions,b.requestOptions);b.requestOptions=Object.assign({},b.requestOptions,{}),b.requestOptions.headers=Object.assign({},{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.101 Safari/537.36"},b.requestOptions.headers);let n=await B([v,b],O=>{let N=g.playError(O.player_response,["ERROR"],a),k=l(O.player_response);if(N||k)throw N||k;return O&&O.player_response&&(O.player_response.streamingData||T(O.player_response)||_(O.player_response))},e,[M,G,P]);Object.assign(n,{formats:V(n.player_response),related_videos:u.getRelatedVideos(n)});const r=u.getMedia(n),A={author:u.getAuthor(n),media:r,likes:u.getLikes(n),dislikes:u.getDislikes(n),age_restricted:!!(r&&s.some(O=>Object.values(r).some(N=>typeof N=="string"&&N.includes(O)))),video_url:p+v,storyboards:u.getStoryboards(n),chapters:u.getChapters(n)};return n.videoDetails=u.cleanVideoDetails(Object.assign({},n.player_response&&n.player_response.microformat&&n.player_response.microformat.playerMicroformatRenderer,n.player_response&&n.player_response.videoDetails,A),n),n};const l=v=>{let b=v&&v.playabilityStatus;return b&&b.status==="LOGIN_REQUIRED"&&b.messages&&b.messages.filter(e=>/This is a private video/.test(e)).length?new a(b.reason||b.messages&&b.messages[0]):null},T=v=>{let b=v.playabilityStatus;return b&&b.status==="UNPLAYABLE"&&b.errorScreen&&b.errorScreen.playerLegacyDesktopYpcOfferRenderer},_=v=>{let b=v.playabilityStatus;return b&&b.status==="LIVE_STREAM_OFFLINE"},L=(v,b)=>`${p+v}&hl=${b.lang||"en"}`,S=(v,b)=>{const e=L(v,b);return f.watchPageCache.getOrSet(e,()=>g.exposedMiniget(e,b).text())},q="https://www.youtube.com/embed/",$=(v,b)=>{const e=`${q+v}?hl=${b.lang||"en"}`;return g.exposedMiniget(e,b).text()},F=v=>{let b=/<script\s+src="([^"]+)"(?:\s+type="text\/javascript")?\s+name="player_ias\/base"\s*>|"jsUrl":"([^"]+)"/.exec(v);return b?b[1]||b[2]:null},D=(v,b,e,t)=>f.cookieCache.getOrSet(e,async()=>{let r=(await S(v,b)).match(/(["'])ID_TOKEN\1[:,]\s?"([^"]+)"/);if(!r&&t)throw new a("Cookie header used in request, but unable to find YouTube identity token");return r&&r[2]}),B=async(v,b,e,t)=>{let n;for(let r of t)try{const A=await x(r,v.concat([n]),e);if(A.player_response&&(A.player_response.videoDetails=i(n&&n.player_response&&n.player_response.videoDetails,A.player_response.videoDetails),A.player_response=i(n&&n.player_response,A.player_response)),n=i(n,A),b(n,!1))break}catch(A){if(A instanceof a||r===t[t.length-1])throw A}return n},i=(v,b)=>{if(!v||!b)return v||b;for(let[e,t]of Object.entries(b))t!=null&&(v[e]=t);return v},x=async(v,b,e)=>{let t=0,n;for(;t<=e.maxRetries;)try{n=await v(...b);break}catch(r){if(r instanceof a||r instanceof m.MinigetError&&r.statusCode<500||t>=e.maxRetries)throw r;let A=Math.min(++t*e.backoff.inc,e.backoff.max);await new Promise(O=>h(O,A))}return n},U=/^[)\]}'\s]+/,C=(v,b,e)=>{if(!e||typeof e=="object")return e;try{return e=e.replace(U,""),JSON.parse(e)}catch(t){throw Error(`Error parsing ${b} in ${v}: ${t.message}`)}},j=(v,b,e,t,n,r)=>{let A=g.between(e,t,n);if(!A)throw Error(`Could not find ${b} in ${v}`);return C(v,b,g.cutAfterJS(`${r}${A}`))},K=(v,b)=>{const e=b&&(b.args&&b.args.player_response||b.player_response||b.playerResponse||b.embedded_player_response);return C(v,"player_response",e)},z=(v,b)=>`${L(v,b)}&pbj=1`,G=async(v,b)=>{const e=Object.assign({headers:{}},b.requestOptions);let t=e.headers.Cookie||e.headers.cookie;e.headers=Object.assign({"x-youtube-client-name":"1","x-youtube-client-version":d,"x-youtube-identity-token":f.cookieCache.get(t||"browser")||""},e.headers);const n=async(k,W)=>{e.headers["x-youtube-identity-token"]||(e.headers["x-youtube-identity-token"]=await D(v,b,k,W))};t&&await n(t,!0);const r=z(v,b),A=await g.exposedMiniget(r,b,e).text();let O=C("watch.json","body",A);if(O.reload==="now"&&await n("browser",!1),O.reload==="now"||!Array.isArray(O))throw Error("Unable to retrieve video metadata in watch.json");let N=O.reduce((k,W)=>Object.assign(W,k),{});return N.player_response=K("watch.json",N),N.html5player=N.player&&N.player.assets&&N.player.assets.js,N},M=async(v,b)=>{let e=await S(v,b),t={page:"watch"};try{d=g.between(e,'{"key":"cver","value":"','"}'),t.player_response=j("watch.html","player_response",e,/\bytInitialPlayerResponse\s*=\s*\{/i,"<\/script>","{")}catch{let r=j("watch.html","player_response",e,/\bytplayer\.config\s*=\s*{/,"<\/script>","{");t.player_response=K("watch.html",r)}return t.response=j("watch.html","response",e,/\bytInitialData("\])?\s*=\s*\{/i,"<\/script>","{"),t.html5player=F(e),t},Z="www.youtube.com",J="/get_video_info",I="https://youtube.googleapis.com/v/",P=async(v,b)=>{const e=new URL(`https://${Z}${J}`);e.searchParams.set("video_id",v),e.searchParams.set("c","TVHTML5"),e.searchParams.set("cver",`7${d.substr(1)}`),e.searchParams.set("eurl",I+v),e.searchParams.set("ps","default"),e.searchParams.set("gl","US"),e.searchParams.set("hl",b.lang||"en"),e.searchParams.set("html5","1");const t=await g.exposedMiniget(e.toString(),b).text();let n=E.parse(t);return n.player_response=K("get_video_info",n),n},V=v=>{let b=[];return v&&v.streamingData&&(b=b.concat(v.streamingData.formats||[]).concat(v.streamingData.adaptiveFormats||[])),b};f.getInfo=async(v,b)=>{let e=await f.getBasicInfo(v,b);const t=e.player_response&&e.player_response.streamingData&&(e.player_response.streamingData.dashManifestUrl||e.player_response.streamingData.hlsManifestUrl);let n=[];if(e.formats.length){if(e.html5player=e.html5player||F(await S(v,b))||F(await $(v,b)),!e.html5player)throw Error("Unable to find html5player file");const A=new URL(e.html5player,p).toString();n.push(o.decipherFormats(e.formats,A,b))}if(t&&e.player_response.streamingData.dashManifestUrl){let A=e.player_response.streamingData.dashManifestUrl;n.push(H(A,b))}if(t&&e.player_response.streamingData.hlsManifestUrl){let A=e.player_response.streamingData.hlsManifestUrl;n.push(Y(A,b))}let r=await Promise.all(n);return e.formats=Object.values(Object.assign({},...r)),e.formats=e.formats.map(w.addFormatMeta),e.formats.sort(w.sortFormats),e.full=!0,e};const H=(v,b)=>new Promise((e,t)=>{let n={};const r=y.parser(!1);r.onerror=t;let A;r.onopentag=N=>{if(N.name==="ADAPTATIONSET")A=N.attributes;else if(N.name==="REPRESENTATION"){const k=parseInt(N.attributes.ID);isNaN(k)||(n[v]=Object.assign({itag:k,url:v,bitrate:parseInt(N.attributes.BANDWIDTH),mimeType:`${A.MIMETYPE}; codecs="${N.attributes.CODECS}"`},N.attributes.HEIGHT?{width:parseInt(N.attributes.WIDTH),height:parseInt(N.attributes.HEIGHT),fps:parseInt(N.attributes.FRAMERATE)}:{audioSampleRate:N.attributes.AUDIOSAMPLINGRATE}))}},r.onend=()=>{e(n)};const O=g.exposedMiniget(new URL(v,p).toString(),b);O.setEncoding("utf8"),O.on("error",t),O.on("data",N=>{r.write(N)}),O.on("end",r.close.bind(r))}),Y=async(v,b)=>{v=new URL(v,p);const e=await g.exposedMiniget(v.toString(),b).text();let t={};return e.split(`
`).filter(n=>/^https?:\/\//.test(n)).forEach(n=>{const r=parseInt(n.match(/\/itag\/(\d+)\//)[1]);t[n]={itag:r,url:n}}),t};for(let v of["getBasicInfo","getInfo"]){const b=f[v];f[v]=async(e,t={})=>{g.checkForUpdates();let n=await R.getVideoID(e);const r=[v,n,t.lang].join("-");return f.cache.getOrSet(r,()=>b(n,t))}}f.validateID=R.validateID,f.validateURL=R.validateURL,f.getURLVideoID=R.getURLVideoID,f.getVideoID=R.getVideoID}(me)),me}var Ee,Ve;function st(){if(Ve)return Ee;Ve=1;const f=Q.PassThrough,E=nt(),y=le(),m=$e(),g=je(),h=Ye(),w=ue(),R=ve(),{parseTimestamp:u}=ve(),o=(a,s)=>{const l=c(s);return o.getInfo(a,s).then(T=>{d(l,T,s)},l.emit.bind(l,"error")),l};Ee=o,o.getBasicInfo=E.getBasicInfo,o.getInfo=E.getInfo,o.chooseFormat=m.chooseFormat,o.filterFormats=m.filterFormats,o.validateID=g.validateID,o.validateURL=g.validateURL,o.getURLVideoID=g.getURLVideoID,o.getVideoID=g.getVideoID,o.cache={sig:h.cache,info:E.cache,watch:E.watchPageCache,cookie:E.cookieCache},o.version=He.version;const c=a=>{const s=new f({highWaterMark:a&&a.highWaterMark||524288});return s._destroy=()=>{s.destroyed=!0},s},p=(a,s,l)=>{["abort","request","response","error","redirect","retry","reconnect"].forEach(T=>{a.prependListener(T,s.emit.bind(s,T))}),a.pipe(s,{end:l})},d=(a,s,l)=>{l=l||{};let T=y.playError(s.player_response,["UNPLAYABLE","LIVE_STREAM_OFFLINE","LOGIN_REQUIRED"]);if(T){a.emit("error",T);return}if(!s.formats.length){a.emit("error",Error("This video is unavailable"));return}let _;try{_=m.chooseFormat(s.formats,l)}catch(B){a.emit("error",B);return}if(a.emit("info",s,_),a.destroyed)return;let L,S=0;const q=B=>{S+=B.length,a.emit("progress",B.length,S,L)};l.IPv6Block&&(l.requestOptions=Object.assign({},l.requestOptions,{family:6,localAddress:y.getRandomIPv6(l.IPv6Block)}));const $=l.dlChunkSize||1024*1024*10;let F,D=!0;if(_.isHLS||_.isDashMPD)F=R(_.url,{chunkReadahead:+s.live_chunk_readahead,begin:l.begin||_.isLive&&Date.now(),liveBuffer:l.liveBuffer,requestOptions:l.requestOptions,parser:_.isDashMPD?"dash-mpd":"m3u8",id:_.itag}),F.on("progress",(B,i)=>{a.emit("progress",B.size,B.num,i)}),p(F,a,D);else{const B=Object.assign({},l.requestOptions,{maxReconnects:6,maxRetries:3,backoff:{inc:500,max:1e4}});if($!==0&&(!_.hasAudio||!_.hasVideo)){let x=l.range&&l.range.start||0,U=x+$;const C=l.range&&l.range.end;L=l.range?(C?C+1:parseInt(_.contentLength))-x:parseInt(_.contentLength);const j=()=>{!C&&U>=L&&(U=0),C&&U>C&&(U=C),D=!U||U===C,B.headers=Object.assign({},B.headers,{Range:`bytes=${x}-${U||""}`}),F=w(_.url,B),F.on("data",q),F.on("end",()=>{a.destroyed||U&&U!==C&&(x=U+1,U+=$,j())}),p(F,a,D)};j()}else l.begin&&(_.url+=`&begin=${u(l.begin)}`),l.range&&(l.range.start||l.range.end)&&(B.headers=Object.assign({},B.headers,{Range:`bytes=${l.range.start||"0"}-${l.range.end||""}`})),F=w(_.url,B),F.on("response",x=>{a.destroyed||(L=L||parseInt(x.headers["content-length"]))}),F.on("data",q),p(F,a,D)}a._destroy=()=>{a.destroyed=!0,F.destroy(),F.end()}};return o.downloadFromInfo=(a,s)=>{const l=c(s);if(!a.full)throw Error("Cannot use `ytdl.downloadFromInfo()` when called with info from `ytdl.getBasicInfo()`");return setImmediate(()=>{d(l,a,s)}),l},Ee}var ot=st();const xe=Qe(ot);class lt{constructor(){this.searchForm=document.getElementById("search-form"),this.channelUrlInput=document.getElementById("channel-url"),this.searchQueryInput=document.getElementById("search-query"),this.searchButton=document.getElementById("search-button"),this.loadingElement=document.getElementById("loading"),this.resultsElement=document.getElementById("results"),this.resultsCountElement=document.getElementById("results-count"),this.resultsListElement=document.getElementById("results-list"),this.errorElement=document.getElementById("error"),this.errorMessageElement=document.getElementById("error-message"),this.init()}init(){this.searchForm.addEventListener("submit",E=>{E.preventDefault(),this.handleSearch()}),this.resultsElement.style.display="none"}async handleSearch(){const E=this.channelUrlInput.value.trim(),y=this.searchQueryInput.value.trim();if(!E||!y){this.showError("URL");return}try{this.showLoading(!0),this.hideError(),this.hideResults();const m=this.extractChannelId(E);if(!m)throw new Error("YouTubeURL");const g=await this.getChannelVideos(m),h=await this.searchVideoDescriptions(g,y);this.displayResults(h,y)}catch(m){console.error(":",m),this.showError(m.message||"")}finally{this.showLoading(!1)}}extractChannelId(E){const y=[/youtube\.com\/channel\/([a-zA-Z0-9_-]+)/,/youtube\.com\/c\/([a-zA-Z0-9_-]+)/,/youtube\.com\/@([a-zA-Z0-9_-]+)/,/youtube\.com\/user\/([a-zA-Z0-9_-]+)/];for(const m of y){const g=E.match(m);if(g)return g[1]}return null}async getChannelVideos(E){try{const y=this.channelUrlInput.value.trim();return console.log(""),this.getSampleVideos()}catch(y){throw console.error(":",y),new Error("")}}getSampleVideos(){return[{id:"dQw4w9WgXcQ",title:"JavaScript - ",description:"JavaScript ",url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ"},{id:"J---aiyznGQ",title:"React  - useState  useEffect",description:"React Web",url:"https://www.youtube.com/watch?v=J---aiyznGQ"},{id:"kJQP7kiw5Fk",title:"Node.js  Express ",description:"Node.js Express RESTful API",url:"https://www.youtube.com/watch?v=kJQP7kiw5Fk"},{id:"L_-WEaMUCiI",title:"CSS Grid Layout",description:"CSS Grid   flexbox",url:"https://www.youtube.com/watch?v=L_-WEaMUCiI"},{id:"UB1O30fR-EE",title:"HTML5 ",description:"HTML5  SEO ",url:"https://www.youtube.com/watch?v=UB1O30fR-EE"},{id:"abc123def45",title:"TypeScript ",description:"TypeScript JavaScript",url:"https://www.youtube.com/watch?v=abc123def45"},{id:"xyz789uvw12",title:"Vue.js ",description:"Vue.js ",url:"https://www.youtube.com/watch?v=xyz789uvw12"},{id:"mno456pqr78",title:"Webpack  Vite ",description:"WebpackVite",url:"https://www.youtube.com/watch?v=mno456pqr78"}]}async getVideoInfo(E){try{console.log(`: ${E}`);const y=await xe.getInfo(E);return{id:xe.getVideoID(E),title:y.videoDetails.title,description:y.videoDetails.description,url:E,publishedAt:y.videoDetails.publishDate,author:y.videoDetails.author.name}}catch(y){throw console.error(":",y),new Error(`: ${E}`)}}async searchVideoDescriptions(E,y){const m=[];for(const g of E)g.description.toLowerCase().includes(y.toLowerCase())&&m.push({...g,matchingText:this.highlightMatchingText(g.description,y)});return m}highlightMatchingText(E,y){const m=new RegExp(`(${y})`,"gi");return E.replace(m,"<strong>$1</strong>")}displayResults(E,y){this.resultsCountElement.textContent=`"${y}"  ${E.length} `,E.length===0?this.resultsListElement.innerHTML='<li style="text-align: center; color: #666;"></li>':this.resultsListElement.innerHTML=E.map(m=>`
        <li>
          <div class="video-title">
            <a href="${m.url}" target="_blank" rel="noopener noreferrer">
              ${this.escapeHtml(m.title)}
            </a>
          </div>
          <div class="video-description">
            ${m.matchingText}
          </div>
        </li>
      `).join(""),this.showResults()}escapeHtml(E){const y=document.createElement("div");return y.textContent=E,y.innerHTML}showLoading(E){this.loadingElement.classList.toggle("hidden",!E),this.searchButton.disabled=E,this.searchButton.textContent=E?"...":""}showResults(){this.resultsElement.style.display="block"}hideResults(){this.resultsElement.style.display="none"}showError(E){this.errorMessageElement.textContent=E,this.errorElement.classList.remove("hidden")}hideError(){this.errorElement.classList.add("hidden")}}document.addEventListener("DOMContentLoaded",()=>{new lt});console.log(`
 :

ytdl-core

:
- 
- ytdl-coregetVideoInfo

:
- YouTube Data API v3
- ytdl-coreURL
- CORS

:
- getVideoInfo('https://www.youtube.com/watch?v=VIDEO_ID') 
- 

:
:
1. YouTube Data API v3 
2. API
3. 
`);
